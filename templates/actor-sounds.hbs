<form class="hearme-actor-groups">
  <p>Define groups of actors that share the same notification sound. The <strong>highest group</strong> containing an actor wins. Actors not in any group use the default sound.</p>

  <ol class="groups-list">
    {{#each groups}}
    <li class="group flexcol" data-idx="{{@index}}">
      <div class="group-header flexrow" style="align-items: center; gap: 8px;">
        <i class="fas fa-grip-lines drag-handle" style="cursor: move;"></i>
        <input type="text" name="{{@index}}.name" value="{{name}}" placeholder="Group Name" style="flex: 2;" />
        <input type="text" name="{{@index}}.sound" value="{{sound}}" placeholder="Sound path" style="flex: 3;" />
        <a class="file-picker" data-type="audio" data-target="{{@index}}.sound" title="Browse"><i class="fas fa-file-audio"></i></a>
        <button type="button" class="remove-group" data-idx="{{@index}}"><i class="fas fa-trash"></i></button>
      </div>

      <div class="group-actors" style="flex-wrap: wrap; gap: 4px; margin-top: 4px;">
        {{#each members}}
        <span class="tag">
          {{name}}
          <button type="button" class="remove-actor" data-actor-id="{{id}}" style="margin-left: 4px; background: none; border: none;"><i class="fas fa-times"></i></button>
        </span>
        {{/each}}
      </div>
    </li>
    {{/each}}
  </ol>

  <section class="available-actors">
    <h3>Available Actors (drag into a group)</h3>
    <div class="actor-pool" style="display: flex; flex-wrap: wrap; gap: 6px;">
      {{#each allActors}}
      <span class="tag actor-tag" data-drag-data='{"type":"Actor","id":"{{id}}"}'>{{name}}</span>
      {{/each}}
    </div>
  </section>

  <footer class="sheet-footer flexrow">
    <button type="button" class="add-group"><i class="fas fa-plus"></i> Add Group</button>
    <button type="submit"><i class="fas fa-save"></i> Save Changes</button>
  </footer>
</form>
